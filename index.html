<div> The localStorage limit is <span id="size">???</span> KBs. </div> 

<button onclick="openTestFunction()">Test link</button>

<script>
        
isIos = '';
        
function gen(n) {
        return new Array((n * 1024) + 1).join('a')
    }
     
    //window.localStorage.clear();
     
    // Determine size of localStorage if it's not set
    if (!localStorage.getItem('size')) {
        var i = 0;
        try {
            // Test up to 10 MB
            for (i = 0; i <= 10000; i += 250) {
                localStorage.setItem('test', gen(i));
            }
        } catch (e) {
            localStorage.removeItem('test');
            localStorage.setItem('size', i ? i - 1 : 0);
            
        }
    }
    
    
    var el = document.getElementById('size');        
    el.innerHTML = localStorage.getItem('size');

function openTestFunction(){  
          var appurl = "clericZoll://";
          var appstore = 'https://testflight.apple.com/join/MvOvWzTO';

          var timeout;
          function preventPopup() {
            clearTimeout(timeout);
            timeout = null;
            window.removeEventListener('pagehide', preventPopup);
          }
          function startApp() {
            window.location = appurl;
            timeout = setTimeout(function(){
              if(confirm('You do not seem to have the App installed, do you want to go download it now?')){
                document.location = appstore;
              }
            }, 1000);
            window.addEventListener('pagehide', preventPopup);
          }
  
}
            
</script>
